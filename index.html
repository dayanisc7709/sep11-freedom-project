<!DOCTYPE html>
<html>
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" />
        <link href="style.css" rel="stylesheet" type="text/css" />
        <style>
            /* CSS */

        </style>

        <title>Title</title>
    </head>
    <body>
        <!-- HTML -->


        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
        <!-- <script src="script.js"></script> -->
<script type="module">

    // import kaboom.js
    import kaboom from "https://unpkg.com/kaboom@3000.0.1/dist/kaboom.mjs";

    // initialize kaboom context
    kaboom();

    loadSprite("wood", "sprites/wood.png")
    loadSprite("wcapsule", "sprites/wcapsule.png")
    loadSprite("rcapsule", "sprites/rcapsule.png")
    loadSprite("player", "sprites/idle3.png")
    loadSprite("player2", "sprites/up2.png")
    loadSprite("player3", "sprites/down2.png")
    loadSprite("player4", "sprites/left4.png")
    loadSprite("player5", "sprites/right3.png")



const background = add([
    sprite("wood"),
    scale(1.5),
    pos(width()/6, height() /12),
])

const player = add([
        pos(width()* 0.5, height()* 0.5),
        sprite('player'),
        scale(2),
        body(),
        area(),
    ])

const wrong = add([
    pos(rand(200, 1200), rand(40,500)),
    sprite("rcapsule"),
    scale(1.5),
    area(),
    body(),
    "enemy",
]);

const right = add([
pos(rand(200, 1200), rand(40,500)),
    sprite("wcapsule"),
    scale(1.5),
    area(),
    body(),
    "danger",
])


player.onCollide("enemy", (enemy) => {
    destroy(enemy);
    destroy(player);
    add([
		text("That's the safe one, you win!"),
        pos(12),

    ])
})

    player.onCollide("danger", (danger) => {
    destroy(danger);
    destroy(player);
	add([
		text("That's the wrong one! You lose!"),
		pos(12),
    ]);

})

    if (onKeyDown('n')) {
        add([
            pos(rand(200, 1200), rand(40,500)),
            sprite("wcapsule"),
            scale(1.5),
            area(),
            body(),
            "danger",
        ])
    }


// ...

add([
    rect(width(), 48),
    pos(0, height() - 48),
    outline(4),
    area(),
    body({isStatic: true}),
    color('#000000'),
])

add([
    rect(width(), 48),
    pos(0, 0),
    outline(4),
    area(),
    body({isStatic: true}),
    color('#000000'),
])


add([
    rect(250, height()),
    pos(0, 0),
    outline(4),
    area(),
    body({isStatic: true}),
    color('#000000'),
])

add([
    rect(400, height()),
    pos(1150, 0),
    outline(4),
    area(),
    body({isStatic: true}),
    color('#000000'),
])


onKeyDown('right', () => {
    player.move(300, 0)
    player.use(sprite("player5"));
})


onKeyDown('left', () => {
    player.move(-300, 0)
    player.use(sprite("player4"));
})

onKeyDown('up', () => {
    player.move(0, -300)
    player.use(sprite("player2"));
});

onKeyDown('down', () => {
    player.move(0, 300)
    player.use(sprite("player3"));
})

 </script>

    </body>
</html>
